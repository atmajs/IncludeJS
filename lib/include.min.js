function __eval(e,n){"use strict";return eval.call(window,e)}!function(e,n){"use strict";var t,r;if("undefined"==typeof exports||e!==exports&&null!=e||(t=r=global),null==t&&(t="undefined"==typeof window?global:window),null==r&&(r=e||t),"undefined"!=typeof include&&"function"==typeof include.js)return r.include=include,void(r.includeLib=include.Lib||t.includeLib);n(t,r,t.document)}(this,function(global,exports,document){"use strict";function fn_proxy(e,n){return function(){e.apply(n,arguments)}}function fn_doNothing(e){"function"==typeof e&&e()}function arr_invoke(e,n,t){if(null!=e&&e instanceof Array!=!1)for(var r=0,i=e.length;r<i;r++)"function"==typeof e[r]&&(null==n?e[r].call(t):e[r].apply(t,n))}function arr_ensure(e,n){if(!n)return e;for(var t,r=n.split("."),i=r.length-1,o=0;o<i;o++)t=r[o],e=e[t]||(e[t]={});return t=r[i],e[t]||(e[t]=[])}function arr_indexOf(e,n){if(null==e)return-1;for(var t=e.length,r=-1;++r<t;)if(n(e[r],r))return r;return-1}var isWeb=!("undefined"==typeof location||!location.protocol||!/^https?:/.test(location.protocol)),reg_subFolder=/([^\/]+\/)?\.\.\//,reg_hasProtocol=/^(file|https?):/i,handler={},hasOwnProp={}.hasOwnProperty,emptyResponse={load:{}},__array_slice=Array.prototype.slice,XMLHttpRequest=global.XMLHttpRequest,isBrowser=!0,isNode=!1,Helper={reportError:function(e){console.error("IncludeJS Error:",e,e.message,e.url),"function"==typeof handler.onerror&&handler.onerror(e)}},XHR=function(e,n){var t=new XMLHttpRequest;t.onreadystatechange=function(){4===t.readyState&&n&&n(e,t.responseText)};var r="object"==typeof e?e.url:e,i=!0!==cfg.sync;isBrowser&&cfg.version&&(r+=(-1===r.indexOf("?")?"?":"&")+"v="+cfg.version),"/"===r[0]&&!0===cfg.lockedToFolder&&(r=r.substring(1)),t.open("GET",r,i),t.send()},XHR_LOAD=function(e,n){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState)return 200!==t.status?void n(t.status):void n(null,t.responseText)},t.open("GET",e,!0!==cfg.sync),t.send()},obj_inherit,obj_getProperty,obj_setProperty;!function(){obj_inherit=function(e){"function"==typeof e&&(e=e.prototype);for(var n,t,r=1,i=arguments.length;r<i;r++){n="function"==typeof arguments[r]?arguments[r].prototype:arguments[r];for(t in n)e[t]=n[t]}return e},obj_getProperty=function(e,n){for(var t=n.split("."),r=t.length,i=0;i<r;i++){if(null==e)return null;e=e[t[i]]}return e},obj_setProperty=function(e,n,t){for(var r,i=n.split("."),o=i.length-1,s=-1;++s<o;)r=i[s],null==e[r]&&(e[r]={}),e=e[r];e[i[s]]=t}}();var path_getDir,path_getFile,path_getExtension,path_resolveCurrent,path_normalize,path_win32Normalize,path_resolveUrl,path_combine,path_isRelative;!function(){function e(e){for(;-1!==e.indexOf("../");)e=e.replace(reg_subFolder,"");return e.replace(/\/\.\//g,"/")}path_getDir=function(e){return e.substring(0,e.lastIndexOf("/")+1)},path_getFile=function(e){return e=e.replace("file://","").replace(/\\/g,"/").replace(/\?[^\n]+$/,""),/^\/\w+:\/[^\/]/i.test(e)?e.substring(1):e},path_getExtension=function(e){var n=e.indexOf("?");return-1===n?e.substring(e.lastIndexOf(".")+1):e.substring(e.lastIndexOf(".",n)+1,n)},path_resolveCurrent=function(){if(null==document)return"undefined"==typeof module?"":path_win32Normalize(module.parent.filename);var e=document.getElementsByTagName("script"),n=e[e.length-1],t=n&&n.getAttribute("src")||"";if("/"===t[0])return t;var r=window.location.pathname.replace(/\/[^\/]+\.\w+$/,"");return"/"!==r[r.length-1]&&(r+="/"),r+t},path_normalize=function(e){var n=e.replace(/\\/g,"/").replace(/([^:\/])\/{2,}/g,"$1/");return/^file:\/\/[^\/]/.test(n)&&(n=n.replace("file://","file:///")),n},path_win32Normalize=function(e){return e=path_normalize(e),"file:"===e.substring(0,5)?e:"file:///"+e},path_resolveUrl=function(n,t){return reg_hasProtocol.test(n)?e(n):("./"===n.substring(0,2)&&(n=n.substring(2)),"/"===n[0]&&null!=t&&null!=t.base&&(n=path_combine(t.base,n),reg_hasProtocol.test(n))?e(n):"/"===n[0]&&cfg.path&&0!==n.indexOf(cfg.path)&&(n=path_combine(cfg.path,n),reg_hasProtocol.test(n))?e(n):("/"!==n[0]&&null!=t&&null!=t.location&&(n=path_combine(t.location,n)),"/"!==n[0]&&!1===reg_hasProtocol.test(n)&&(n="/"+n),e(n)))},path_isRelative=function(e){switch(e.charCodeAt(0)){case 47:return!1;case 102:case 104:return!1===reg_hasProtocol.test(e)}return!0},path_combine=function(){for(var e,n="",t=arguments.length,r=-1;++r<t;)(e=arguments[r])&&(e=path_normalize(e),""!==n?("/"!==n[n.length-1]&&(n+="/"),"/"===e[0]&&(e=e.substring(1)),n+=e):n=e);return n}}();var tree_resolveUsage;!function(){function e(n,t,r){if(null==t){console.warn("<include> Usage Not Found:",n),console.warn("- Ensure to have it included before with the correct alias"),console.warn("- Initiator Stacktrace:");for(var i=[],o=r;null!=o;)i.push(o.url),o=o.parent;return console.warn(i.join("\n")),null}for(var s,u=t.includes,l=-1,a=u.length;++l<a;)if(s=u[l],(s.route.alias||Routes.parseAlias(s.route))===n)return s.resource;return e(n,t.parent,r)}tree_resolveUsage=function(n,t,r){for(var i,o,s,u,l,a=[],c=t.length,f=-1;++f<c;){if(s=o=t[f],u=o.indexOf("."),-1!==u&&(s=o.substring(0,u),o=o.substring(u+1)),null==(l=e(s,n.parent,n)))return null;if(4!==l.state)return n.state=3,l.on(4,r,l,"push"),null;i=l.exports,s!==o&&(i=obj_getProperty(i,o)),"object"==typeof i&&null==i&&console.warn("<include:use> Used resource has no exports",s,n.url),a[f]=i}return a}}();var res_groupByType;!function(){function e(e,n,t){var r=e[n];null==r&&(r=e[n]=[]),r.push(t)}res_groupByType=function(n){for(var t={},r=n.length,i=-1;++i<r;){var o=n[i];e(t,PathResolver.getType(o),o)}return t}}();var cfg,Config;!function(){function e(e,t,r){switch(t){case"loader":for(var i in r)CustomLoader.register(i,r[i]);return;case"modules":return void(!0===r&&n());case"commonjs":return void(!0===r&&CommonJS.enable());case"amd":return void(!0===r&&Amd.enable());case"map":return void PathResolver.configMap(r);case"extentionDefault":return void PathResolver.configExt({def:r});case"extentionTypes":return void PathResolver.configExt({types:r})}t in e==!1&&console.warn("Not supported config",t),e[t]=r}function n(){if(void 0===Object.defineProperty)return void console.warn("Browser do not support Object.defineProperty");Object.defineProperty(global,"module",{get:function(){return global.include}}),Object.defineProperty(global,"exports",{get:function(){var e=global.include;return e.exports||(e.exports={})},set:function(e){global.include.exports=e}})}Config=function(){},Config.prototype={path:null,loader:null,version:null,lockedToFolder:!1,sync:!1,eval:null==document,es6Exports:!1,call:function(n,t,r){if(null==t)return this;var i=typeof t;if("string"===i&&null==r)return this[t];if("string"===i&&null!=r)return e(this,t,r),n;if("object"===i&&null==r)for(var o in t)e(this,o,t[o]);return n}},cfg=new Config}();var bin,Bin;!function(){function e(e){var n=e,t=n.indexOf("?");return-1!==t&&(n=n.substring(0,t)),n.toLowerCase()}Bin={add:function(n,t,r){var i=e(t);bin[n][i]=r},find:function(e){var n=path_isRelative(e)?"/"+e:e;for(var t in bin){var r=Bin.get(t,n);if(null!=r)return r}return null},remove:function(e){function n(e,n){for(var t in e)e[t]===n&&(e[t]=null)}var t=Bin.find(e);if(null!=t)for(var r in bin)n(bin[r],t)},get:function(n,t){if(null!=t){if(null==n)return Bin.find(t);var r=e(t),i=bin[n][r];if(null==i&&/^https?:\//.test(r)&&"undefined"!=typeof location&&(r=r.replace(location.origin,""),i=bin[n][r]),null==i&&cfg.lockedToFolder){var o=path_getDir(/^file:/.test(r)?location.href:location.pathname),s=path_combine("/",r.replace(o,""));i=bin[n][s]}if(null==i&&isBrowser&&"/"===r[0]){var o=path_combine(global.location.origin,r);i=bin[n][o]}return i}}},bin={js:{},css:{},load:{},ajax:{},embed:{},mask:{}}}();var Routes,RoutesLib;!function(){function e(){var e={},n=/([^\\\/]+)\.\w+$/;return{register:function(n,t,r){if("string"==typeof t&&path_isRelative(t)){var i=r||include,o=i.location||path_getDir(i.url||path_resolveCurrent());path_isRelative(o)&&(o="/"+o),t=o+t}e[n]=t instanceof Array?t:t.split(/[\{\}]/g)},resolve:function(n,t){var r,i,o,s,u=t.indexOf("?"),l=t.indexOf("::"),a="";if(-1!==l&&(r=t.substring(l+2),t=t.substring(0,l)),-1!==u&&(a=t.substring(u),t=t.substring(0,u)),t=t.split("/"),null==(o=e[n]))return{path:t.join("/")+a,params:null,alias:r};for(i=o[0],s=1;s<o.length;s++)if(s%2==0)i+=o[s];else{var c=o[s]<<0;if(c>t.length-1&&(c=t.length-1),i+=t[c],s===o.length-2)for(c++;c<t.length;c++)i+="/"+t[c]}return{path:i+a,params:null,alias:r}},each:function(e,n,t,r,i){if(null!=n)if("lazy"!==e||null!=i)if(n instanceof Array)for(var o=0;o<n.length;o++)this.each(e,n[o],t,r,i);else if("object"!=typeof n){if("string"==typeof n){var s=this.resolve(r,n);return r&&(r+="."+n),void t(r,s,i)}console.error("Include Package is invalid",arguments)}else for(var u in n)this.each(e,n[u],t,u,i);else for(var u in n)this.each(e,n[u],t,null,u)},getRoutes:function(){return e},parseAlias:function(e){var t=e.path,r=n.exec(t);return r&&r[1]}}}RoutesLib=e,Routes=e()}();var Events=function(e){function n(){Events.ready=fn_doNothing,null!=t&&(arr_invoke(t),t=null)}if(null==e)return{ready:fn_doNothing,load:fn_doNothing};var t=[];return"onreadystatechange"in e?e.onreadystatechange=function(){!1!==/complete|interactive/g.test(e.readyState)&&n()}:e.addEventListener?e.addEventListener("DOMContentLoaded",n):window.onload=n,{ready:function(e){t.unshift(e)}}}(document),ScriptStack=function(){function e(e,n){cfg.version&&(e+=(-1===e.indexOf("?")?"?":"&")+"v="+cfg.version),"/"===e[0]&&!0===cfg.lockedToFolder&&(e=e.substring(1));var t=document.createElement("script");t.type="text/javascript",t.src=e,"onreadystatechange"in t?t.onreadystatechange=function(){("complete"===this.readyState||"loaded"===this.readyState)&&n()}:t.onload=t.onerror=n,null==s&&(s=document.getElementsByTagName("head")[0]),s.appendChild(t)}function n(){function t(e){e&&"error"===e.type&&console.log("Script Loaded Error",r.url);for(var t=0,i=a.length;t<i;t++)if(a[t]===r){a.splice(t,1);break}if(t===i)return void console.error("Loaded Resource not found in stack",r);2.5!==r.state&&r.readystatechanged(3),u=null,n()}if(!l){if(0===a.length)return void o();if(null==u){var r=u=a[0];if(1!==r.state){if(r.state=1,global.include=r,r.source)return __eval(r.source,r),void t();e(r.url,t)}}}}function t(){if(!l){if(0===a.length)return void o();if(null==u){var e=a[0];e.state<2||(u=e,u.state=1,global.include=e,__eval(e.source,e),i(e),2.5!==e.state&&e.readystatechanged(3),u=null,t())}}}function r(){if(!l){if(0===a.length)return void o();var e=a.shift();e.state<2||(u=e,u.state=3,global.include=e,__eval(e.source,e),e.readystatechanged(3),u=null,r())}}function i(e){for(var n=a.length,t=-1;++t<n;)if(a[t]===e)return void a.splice(t,1)}function o(){for(var e=-1,n=c.length;++e<n;)c[e]();c.length=0}var s,u,l,a=[],c=[];return{load:function(e,i,o){return this.add(e,i),!cfg.eval||o?void n():e.source?(e.state=2,void t()):void XHR(e,function(e,n){if(n||(console.error("Not Loaded:",e.url),console.error("- Initiator:",e.parent&&e.parent.url||"<root resource>")),e.source=n,e.state=2,cfg.sync)return void r();t()})},add:function(e,n){if(1===e.priority)return a.unshift(e);if(null==n)return a.push(e);for(var t=a.length,r=-1;++r<t;)if(a[r]===n)return a.splice(r,0,e);a.push(e)},moveToParent:function(e,n){var t,r=a.length,i=-1,o=-1;for(t=0;t<r;t++)if(a[t]===e){o=t;break}if(-1!==o){for(t=0;t<r;t++)if(a[t]===n){i=t;break}-1!==i&&(o<i||(a.splice(o,1),a.splice(i,0,e)))}},pause:function(){l=!0},resume:function(){l=!1,null==u&&this.touch()},touch:function(){(cfg.eval?t:n)()},complete:function(e){if(!0!==l&&0===a.length)return void e();c.push(e)}}}(),IncludeDeferred=function(){this.callbacks=[],this.state=-1};IncludeDeferred.prototype={on:function(e,n,t,r){return this===t&&-1===this.state?(n(this),this):(null==r&&(r=this.state<3||this===t?"unshift":"push"),e<=this.state?n(this):this.callbacks[r]({state:e,callback:n}),this)},hasPendingChildren:function(){var e=this.includes;if(null==e)return!1;for(var n=e.length,t=-1;++t<n;)if(!e[t].isCyclic&&4!==e[t].resource.state)return!0;return!1},readystatechanged:function(e){if(this.state<e&&(this.state=e),3===this.state){if(this.hasPendingChildren())return;this.state=4}var n=this.state,t=this.callbacks,r=t.length,i=-1;if(0!==r)for(;++i<r;){var o=t[i];if(!(null==o||o.state>this.state)&&(t.splice(i,1),r--,i--,o.callback(this),this.state<n))break}},ready:function(e){var n=this;return this.on(4,function(){Events.ready(function(){n.resolve(e)})},this)},done:function(e){var n=this;return this.on(4,function(){n.resolve(e)},this)},resolve:function(e){var n=this.includes,t=null==n?0:n.length;if(t>0&&null==this.response){this.response={};for(var r,i,o,s=0;s<t;s++)if(o=n[s],r=o.resource,i=o.route,void 0!==r.exports){var u=r.type;switch(u){case"js":case"load":case"ajax":case"mask":var l=i.alias||Routes.parseAlias(i),a="js"===u?this.response:this.response[u]||(this.response[u]={});if(null!=l){var c=r.exports;cfg.es6Exports&&null!=c&&"object"==typeof c&&(c=c.default||c),a[l]=c;break}console.warn("<includejs> Alias is undefined",r)}}}var f=this.response||emptyResponse,d=this;if(!(null==this._use&&null!=this._usage&&(this._use=tree_resolveUsage(this,this._usage,function(){d.state=4,d.resolve(e),d.readystatechanged(4)}),this.state<4))){if(this._use)return void e.apply(null,[f].concat(this._use));var h=null;"js"===this.type&&(h=global.include,global.include=this),e(f),null!=h&&global.include===this&&(global.include=h)}}};var Include,IncludeLib={loadBags:[document]};!function(IncludeDeferred){function embedPlugin(source){eval(source)}function includePackage(e,n,t){var r=1===t.length?t[0]:__array_slice.call(t);return e instanceof Resource?e.include(n,r):new Resource("js").include(n,r)}function createIncluder(e){return function(){return includePackage(this,e,arguments)}}function doNothing(){return this}function stub_freeze(e){e.js=e.css=e.load=e.ajax=e.embed=e.lazy=e.inject=e.mask=doNothing}function stub_release(e){for(var n=["js","css","load","ajax","embed","lazy","mask"],t=n.length;-1!=--t;)e[n[t]]=createIncluder(n[t]);e.inject=e.js}Include=function(){IncludeDeferred.call(this)},stub_release(Include.prototype),obj_inherit(Include,IncludeDeferred,{_use:null,_usage:null,isBrowser:isBrowser,isNode:isNode,isRoot:!1,setCurrent:function(e){var n=e.url,t=this.getResourceById(n,"js");if(null==t){"/"===n[0]&&this.base&&(n=this.base+n.substring(1));var t=new Resource("js",{path:n},e.namespace,null,null,n)}t.state<3&&console.error("<include> Resource should be loaded",e),t.state=3,global.include=t},cfg:function(e,n){return cfg.call(this,e,n)},routes:function(e){if(null==e)return Routes.getRoutes();if(2===arguments.length)return Routes.register(e,arguments[1],this),this;for(var n in e)Routes.register(n,e[n],this);return this},promise:function(e){for(var n=e.split("."),t=global;n.length;){var r=n.shift();t=t[r]||(t[r]={})}return t},register:function(e){function n(e){return null==l?e:("/"===e.url[0]&&(e.url=l+e.url.substring(1)),"/"===e.parent[0]&&(e.parent=l+e.parent.substring(1)),e.id=e.url,e)}function t(e,n){e.exports=n,e.readystatechanged(4)}var r,i,o,s,u,l=this.base;for(r in e)for(o=e[r],s=o.length,u=-1;++u<s;){i=n(o[u]);var a=i.url,c=i.url,f=i.namespace,d=i.parent&&Bin.find(i.parent),h=new Resource,p=i.state;if(a||c){switch(c&&("/"===c[0]&&(c=c.substring(1)),h.location=path_getDir(c)),h.state=null==p?"js"===r?3:4:p,h.namespace=f,h.type=r,h.url=c||a,h.parent=d,h.base=d&&d.base||l,r){case"load":case"lazy":for(var v='[data-bundler-path="/'+c+'"]',g=IncludeLib.loadBags,b=g.length,y=null;--b>-1&&null==y;)null!=g[b]&&(y=g[b].querySelector(v));if(null==y){console.error('"%s" Data was not embedded into html',a);break}h.exports=y.innerHTML,CustomLoader.exists(h)&&(h.state=3,CustomLoader.load(h,t))}Bin.add(r,a,h)}}},instance:function(e,n){var t;return null==e?(t=new Include,t.isRoot=!0,t.state=4,t):(t=new Resource("js"),t.state=4,t.url=path_resolveUrl(e,n),t.location=path_getDir(t.url),t.parent=n,t.isRoot=!0,t)},getResource:function(e,n){return this.base&&"/"===e[0]&&(e=this.base+e.substring(1)),this.getResourceById(e,n)},getResourceById:function(e,n){var t=Bin.get(n,e);return null!=t?t:this.base&&"/"===e[0]&&null!=(t=Bin.get(n,path_combine(this.base,e)))?t:this.base&&this.location&&null!=(t=Bin.get(n,path_combine(this.base,this.location,e)))?t:this.location&&null!=(t=Bin.get(path_combine(this.location,e)))?t:null},getResources:function(){return bin},removeFromCache:function(e){Bin.remove(e)},plugin:function(e,n){var t=[],r=0,i=0,o=0,s=function(e,t){i++,embedPlugin(t),i===r-1&&n&&(n(),n=null)};for(Routes.each("",e,function(e,n){t.push("/"===n.path[0]?n.path.substring(1):n.path)}),r=t.length;o<r;o++)XHR(t[o],s);return this},client:function(){return!0===cfg.server&&stub_freeze(this),this},server:function(){return!0!==cfg.server&&stub_freeze(this),this},use:function(){return null==this.parent?(console.error("<include.use> Parent resource is undefined"),this):(this._usage=arguments,this)},pauseStack:fn_proxy(ScriptStack.pause,ScriptStack),resumeStack:fn_proxy(ScriptStack.resume,ScriptStack),allDone:function(e){ScriptStack.complete(function(){function n(){--r<1&&e()}var t=include.getPending(),r=t.length;if(0===r)return void e();for(var i=-1,o=r;++i<o;)t[i].on(4,n,null,"push")})},getPending:function(e){var n,t,r,i=[];for(t in bin)if("all"!==t&&(null==e||e===t))for(r in bin[t])n=bin[t][r],n.state<4&&i.push(n);return i},Lib:IncludeLib})}(IncludeDeferred);var CustomLoader=function(){function e(e){return"string"!=typeof e&&("function"==typeof e.ready||"function"==typeof e.process)}function n(n){var t=path_getExtension(n),r=cfg.loader[t];if(e(r))return r;var i,o=r;if("object"==typeof o)for(var s in o){i=s,o=o[s];break}return cfg.loader[t]=new Resource("js",Routes.resolve(i,o),i,null,null,null,1)}function t(e,n){return function(t){e(n,t)}}function r(e,n,r,i){if(null==r.process)return void i(n,e);var o=t(i,n),s=r.process(e,n,o);void 0!==s&&i(n,s)}function i(e,n,t){function i(e,i){r(i,e,n,t)}return"string"==typeof e.exports?void r(e.exports,e,n,t):n.load?n.load(e,i):void XHR(e,i)}var o={process:function(e,n){try{return JSON.parse(e)}catch(n){return console.error(n,e),null}}},s={process:function(e,n){var t=document.createElement("div");return t.innerHTML=e,IncludeLib.loadBags.push(t),null}};return cfg.loader={json:o,load:s},{load:function(e,t){var r=n(e.url);if(r.process)return void i(e,r,t);r.on(4,function(){i(e,r.exports,t)},null,"push")},exists:function(e){if(!e.url)return!1;var n=path_getExtension(e.url);return cfg.loader.hasOwnProperty(n)},register:function(e,n){if("string"==typeof n){var t=include;null==t.location&&(t={location:path_getDir(path_resolveCurrent())}),n=path_resolveUrl(n,t)}cfg.loader[e]=n}}}(),LazyModule={create:function(e,n){for(var t=e.split("."),r=global,i=t[t.length-1];t.length>1;){var o=t.shift();r=r[o]||(r[o]={})}t=null,Object.defineProperty(r,i,{get:function(){delete r[i];try{var t=__eval(n,global.include);null==t||t instanceof Resource||(r[i]=t)}catch(n){n.xpath=e,Helper.reportError(n)}finally{return n=null,e=null,r[i]}}})}},Resource;!function(e,n,t,r){function i(e){var n=e.type,i=e.parent,s=e.url;if(null==document&&"css"===n)return e.state=4,e;if(!1===r.exists(e))switch(n){case"js":case"embed":t.load(e,i,"embed"===n);break;case"ajax":case"load":case"lazy":case"mask":XHR(e,o);break;case"css":e.state=4;var u=document.createElement("link");u.href=s,u.rel="stylesheet",u.type="text/css",document.body.appendChild(u)}else"js"!==n&&"embed"!==n||t.add(e,e.parent),r.load(e,o);return e}function o(e,n){switch(n||console.warn("Resource can`t be loaded",e.url),e.type){case"js":case"embed":return e.source=n,e.state=2,void t.touch();case"load":case"ajax":e.exports=n;break;case"lazy":LazyModule.create(e.xpath,n);break;case"css":var r=document.createElement("style");r.type="text/css",r.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(r);break;case"mask":if(n){var i=global.mask;return null==i&&(i=global.require("mask")),void i.Module.registerModule(n,{path:e.url}).done(function(n){e.exports=n.exports,e.readystatechanged(4)}).fail(function(n){console.error(n),e.readystatechanged(4)})}}e.readystatechanged(4)}function s(e,n,t){if(null==e)return null;null==t&&(t=[]);for(var r,i=e.length,o=-1;++o<i;)r=e[o].resource,n===r.type&&t.push(r),null!=r.includes&&s(r.includes,n,t);return t}Resource=function(n,r,o,s,u,l,a){e.call(this);var c=r&&r.path;null!=c&&(c=path_normalize(c),c=PathResolver.resolveBasic(c,n,u)),null==l&&c&&(l=c);var f=Bin.get(n,l);if(f)return f.state<4&&"js"===n&&t.moveToParent(f,u),f;if(this.id=l,this.url=c,this.type=n,this.xpath=s,this.route=r,this.parent=u,this.priority=a,this.namespace=o,this.base=u&&u.base,this.childLoaded=fn_proxy(this.childLoaded,this),null==n)return this.state=3,this;if(null==c)return this.state=3,this.url=path_resolveCurrent(),this.location=path_getDir(this.url),this;if(this.state=0,this.location=path_getDir(c),Bin.add(n,l,this),!1===PathResolver.isNpm(this.url))return i(this),this;if(!0===isNode&&PathResolver.isNodeNative(this.url))return this.exports=__nativeRequire(this.url),this.readystatechanged(4),this;var d=this;return PathResolver.resolveNpm(this.url,this.type,this.parent,function(e,n){if(e)return void d.readystatechanged(4);d.url=n,i(d)}),this},Resource.prototype=obj_inherit(Resource,e,{state:null,location:null,includes:null,response:null,url:null,base:null,type:null,xpath:null,route:null,parent:null,priority:null,namespace:null,setBase:function(e){return this.base=e,this},childLoaded:function(e){var n=this.includes;if(n&&n.length){if(this.state<3)return;for(var t=0;t<n.length;t++){var r=n[t];if(!r.isCyclic&&4!==r.resource.state)return}}this.readystatechanged(4)},create:function(e,n,t,r,i){this.state=this.state>=3?3:2,this.response=null,null==this.includes&&(this.includes=[]);var o=new Resource(e,n,t,r,this,i),s={resource:o,route:n,isCyclic:o.contains(this.url)};return this.includes.push(s),s},include:function(e,t){var r,i=this,o=[];n.each(e,t,function(n,t,s){null!=i.route&&i.route.path===t.path||(r=i.create(e,t,n,s),o.push(r))});for(var s=-1,u=o.length;++s<u;){var l=o[s];l.isCyclic?this.childLoaded(l.resource):l.resource.on(4,this.childLoaded)}return this},require:function(e){null==this.exports&&(this.exports={}),this.includes=[];var n=res_groupByType(e);for(var t in n)this.include(t,n[t]);return this},pause:function(){this.state=2.5;var e=this;return function(n){1===arguments.length&&(e.exports=n),e.readystatechanged(3)}},contains:function(e,n){null==n&&(n=[]),n.push(this);var t=this.includes;if(null==t)return!1;for(var r=0;r<t.length;r++)if(-1===n.indexOf(t[r].resource)){if(t[r].resource.url===e)return!0;if(t[r].resource.contains(e,n))return!0}return!1},getNestedOfType:function(e){return s(this.includes,e)}})}(Include,Routes,ScriptStack,CustomLoader);var __nativeRequire,__includeRequire;if(global.require){var name=global.require.name;"amd"!==name&&"commonjs"!==name&&(__nativeRequire=global.require)}var CommonJS;!function(){function e(){global.require=CommonJS.require}function n(){if("undefined"==typeof module){if(void 0===Object.defineProperty)return void console.warn("Browser do not support Object.defineProperty");Object.defineProperty(global,"module",{get:function(){return global.include},configurable:!0}),Object.defineProperty(global,"exports",{get:function(){var e=global.include;return e.exports||(e.exports={})},set:function(e){global.include.exports=e},configurable:!0})}}CommonJS={exports:null,require:function(e){if(46!==e.charCodeAt(0)&&null!=__nativeRequire)return __nativeRequire(e);var n=cfg.sync,t=cfg.eval,r=include,i=null;return cfg.sync=!0,cfg.eval=!0,include.js(e+"::Module").done(function(e){i=e.Module}),include=r,cfg.sync=n,cfg.eval=t,i},enable:function(){"function"!=typeof __nativeRequire&&(n(),e())}}}();var Amd;!function(){function e(n,t){for(var r in t){var i=t[r];null!=i&&("load"!==r&&"ajax"!==r?n[+r]=i:e(n,i))}}Amd={enable:function(){n()}};var n;!function(){function t(e,n){var t=-1,i=e.length;e:for(;++t<i;){var o=e[t][0];if(o.length===n.length){for(var s=-1,u=o.length;++s<u;){var l=o[s];if(!1===l(n[s]))continue e}return e[t][1]}}return console.warn("Define function arguments are invalid",n),r}function r(){}function i(n,t,r,i){if(null!=t&&(bin.js[t]=n),null==r)return void(n.exports=o(i)||n.exports);var u=s(r,n),l=u.array;if(0===u.linked.length)return void(n.exports=o(i,l)||n.exports);n.require(u.linked).done(function(t){e(l,t),n.exports=o(i,l)||n.exports})}function o(e,n){return"function"==typeof e?e.apply(null,n||[]):e}function s(e,n){for(var t=new Array(e.length),r=[],i=e.length,o=-1;++o<i;){var s=f[e[o]];null!=s?t[o]=s(n):r.push(e[o]+"::"+o)}return{array:t,linked:r}}function u(e){return"string"==typeof e}function l(e){return!0}function a(e){return e instanceof Array}n=function(){var e=global.define=function(e,n,r){for(var i=arguments.length,o=new Array(i);--i>-1;)o[i]=arguments[i];t(c,o)(global.include,e,n,r)};__includeRequire=global.require=function(){return isNode&&__nativeRequire&&1===arguments.length?__nativeRequire.apply(null,arguments):e.apply(null,arguments)},"undefined"!=typeof require&&(require=__includeRequire)};var c=[[[l],function(e,n){i(e,null,null,n)}],[[u,l],function(e,n,t){i(e,n,null,t)}],[[u,a,l],function(e,n,t,r){i(e,n,t,r)}],[[a,l],function(e,n,t){i(e,null,n,t)}]],f={module:function(e){return e},exports:function(e){return e.exports={}},require:function(e){return CommonJS.require}}}()}();var PathResolver;!function(){function e(e){return u[e]||e}function n(e){return/\.[\w]{1,8}($|\?)/.test(e)}function t(e){return/^([\w\-]+)(\/[\w\-_]+)*$/.test(e)}function r(e,t,r){function i(){var e=l+"/node_modules/"+o+"/";XHR_LOAD(e+"package.json",function(n,t){var o;if(t)try{o=JSON.parse(t)}catch(n){}if(null!=n||null==o){var a=l.replace(/[^\/]+\/?$/,"");return a===l?void r("Not found"):(l=a,void i())}return u?void r(null,e+u):o.main?void s(e,o.main,r):void r(null,path_combine(e,"index.js"))})}var o=/^([\w\-]+)/.exec(t)[0],u=t.substring(o.length+1);u&&!1===n(u)&&(u+=".js");var l=e.replace(/[^\/]+\.[\w]{1,8}$/,"");i()}function i(e,t){if(n(e))return e;var r=l[t];if(null==r)return console.warn("Extension is not defined for "+t),e;var i=e.indexOf("?");return-1===i?e+"."+r:e.substring(0,i)+"."+r+e.substring(i)}function o(e){var n=/\.([\w]{1,8})($|\?|:)/.exec(e);if(null===n)return a.js;var t=n[1];return a[t]||"load"}function s(e,t,r){var i=path_combine(e,t);if(n(i))return void r(null,i);var o=i+".js";XHR_LOAD(o,function(n,s){if(null==n)return void r(null,o);o=i+"/index.js",XHR_LOAD(o,function(n,i){if(null==n)return void r(null,o);r("Entry File does not exist: "+t+" in "+e)})})}PathResolver={configMap:function(e){for(var n in e)u[n]=e},configExt:function(e){var n=e.def,t=e.types;for(var r in n)l[r]=n[r];for(var r in t)a[r]=t[r]},resolveBasic:function(n,r,o){return"js"===r&&t(n)?n:i(path_resolveUrl(e(n),o),r)},isNpm:t,getType:o,resolveNpm:function(i,o,s,u){var a=e(i);if(a.indexOf(".")>-1)return void u(null,a);if("js"===o&&t(a)){return void r(s&&s.location||path_resolveCurrent(),a,u)}!1===n(a)&&(a+="."+l[o]),u(null,a)},isNodeNative:function(e){return-1!==c.indexOf(e)}};var u={},l={js:"js",css:"css",mask:"mask"},a={js:"js",es6:"js",ts:"js",css:"css",less:"css",scss:"css",mask:"mask",json:"load",yml:"load"},c=["assert","async_hooks","buffer","child_process","cluster","console","constants","crypto","dgram","dns","domain","events","fs","http","http2","https","inspector","module","net","os","path","perf_hooks","process","punycode","querystring","readline","repl","stream","string_decoder","timers","tls","tty","url","util","v8","vm","zlib"]}(),IncludeLib.Routes=RoutesLib,IncludeLib.Resource=Resource,IncludeLib.ScriptStack=ScriptStack,IncludeLib.PathResolver=PathResolver,IncludeLib.Config=Config,IncludeLib.registerLoader=CustomLoader.register,exports.include=new Include,exports.includeLib=IncludeLib});
//# sourceMappingURL=include.min.js.map