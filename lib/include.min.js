function __eval(e,t){"use strict";return t&&t.route.params,eval.call(window,e)}(function(e,t){"use strict";var n,r,a;"undefined"==typeof exports||e!==exports&&null!=e||(n=r=global),null==n&&(n="undefined"==typeof window?global:window),null==r&&(r=e||n),a=n.document,t(n,r,a)})(this,function(e,t,n){"use strict";function r(e,t){return function(){e.apply(t,arguments)}}function a(e){"function"==typeof e&&(e=e.prototype);for(var t,n,r=1,a=arguments.length;a>r;r++){t="function"==typeof arguments[r]?arguments[r].prototype:arguments[r];for(n in t)e[n]=t[n]}return e}function i(e){var t=e.lastIndexOf("/");return-1===t?"":e.substring(t+1,-t)}function o(){if(null==n)return"undefined"==typeof module?"":s(module.parent.filename);var e=n.getElementsByTagName("script"),t=e[e.length-1],r=t&&t.getAttribute("src")||"";return"/"===r[0]?r:"/"+r}function s(e){return e=e.replace(/\\/g,"/"),"file:"===e.substring(0,5)?e:"file:///"+e}function l(e,t){switch(cfg.path&&"/"===e[0]&&(e=cfg.path+e.substring(1)),e.substring(0,5)){case"file:":case"http:":return e}for("./"===e.substring(0,2)&&(e=e.substring(2)),"/"===e[0]?(isWeb===!1||cfg.lockedToFolder===!0)&&(e=e.substring(1)):null!=t&&null!=t.location&&(e=t.location+e);-1!==e.indexOf("../");)e=e.replace(reg_subFolder,"");return e}function u(e){var t=e.charCodeAt(0);switch(t){case 47:return!1;case 102:case 104:return/^file:|https?:/.test(e)===!1}return!0}function c(e){var t=e.indexOf("?");return-1===t?e.substring(e.lastIndexOf(".")+1):e.substring(e.lastIndexOf(".",t)+1,t)}var f={reportError:function(e){console.error("IncludeJS Error:",e,e.message,e.url),"function"==typeof handler.onerror&&handler.onerror(e)}},d=function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&t&&t(e,n.responseText)},n.open("GET","object"==typeof e?e.url:e,!0),n.send()},h=function(){var e={},t=/([^\\\/]+)\.\w+$/;return{register:function(t,n,r){if("string"==typeof n&&u(n)){var a=r||include,s=a.location||i(a.url||o());u(s)&&(s="/"+s),n=s+n}e[t]=n instanceof Array?n:n.split(/[\{\}]/g)},resolve:function(t,n){var r,a,i,o,s,l,u,c,f=n.indexOf("?"),d=n.indexOf("::");if(-1!==d&&(r=n.substring(d+2),n=n.substring(0,d)),-1!==f){for(c=n.substring(f+1).split("&"),i={},s=0,u=c.length;u>s;s++)l=c[s].split("="),i[l[0]]=l[1];n=n.substring(0,f)}if(n=n.split("/"),o=e[t],null==o)return{path:n.join("/"),params:i,alias:r};for(a=o[0],s=1;o.length>s;s++)if(0===s%2)a+=o[s];else{var h=o[s]<<0;if(h>n.length-1&&(h=n.length-1),a+=n[h],s===o.length-2)for(h++;n.length>h;h++)a+="/"+n[h]}return{path:a,params:i,alias:r}},each:function(e,t,n,r,a){var i;if(null==t)return console.error("Include Item has no Data",e,r),void 0;if("lazy"!==e||null!=a)if(t instanceof Array)for(var o=0;t.length>o;o++)this.each(e,t[o],n,r,a);else if("object"!=typeof t){if("string"==typeof t){var s=this.resolve(r,t);return r&&(r+="."+t),n(r,s,a),void 0}console.error("Include Package is invalid",arguments)}else for(i in t)hasOwnProp.call(t,i)&&this.each(e,t[i],n,i,a);else for(i in t)this.each(e,t[i],n,null,i)},getRoutes:function(){return e},parseAlias:function(e){var n=e.path,r=t.exec(n);return r&&r[1]}}},p=h(),g=function(){var t,r,a=[],i=function(e,r){var a=n.createElement("script");a.type="text/javascript",a.src=e,"onreadystatechange"in a?a.onreadystatechange=function(){("complete"===this.readyState||"loaded"===this.readyState)&&r()}:a.onload=a.onerror=r,(t||(t=n.getElementsByTagName("head")[0])).appendChild(a)},o=function(){function t(e){e&&"error"===e.type&&console.log("Script Loaded Error",n.url);for(var t=0,i=a.length;i>t;t++)if(a[t]===n){a.splice(t,1);break}return t===i?(console.error("Loaded Resource not found in stack",n),void 0):(n.readystatechanged(3),r=null,o(),void 0)}if(0!==a.length&&null==r){var n=r=a[0];if(1!==n.state)return n.state=1,e.include=n,e.iparams=n.route.params,n.source?(__eval(n.source,n),t(),void 0):(i(n.url,t),void 0)}},s=function(){if(0!==a.length&&null==r){var t=a[0];if(!(2>t.state)){r=t,t.state=1,e.include=t,__eval(t.source,t);for(var n,i=0,o=a.length;o>i;i++)if(n=a[i],n===t){a.splice(i,1);break}t.readystatechanged(3),r=null,s()}}};return{load:function(e,t,n){var r=!1;if(t)for(var i=0,l=a.length;l>i;i++)if(a[i]===t){a.splice(i,0,e),r=!0;break}return r||a.push(e),!cfg.eval||n?(o(),void 0):e.source?(e.state=2,s(),void 0):(d(e,function(e,t){t||console.error("Not Loaded:",e.url),e.source=t,e.state=2,s()}),void 0)},moveToParent:function(e,t){var n,r=a.length,i=-1,o=-1;for(n=0;r>n;n++)if(a[n]===e){o=n;break}if(-1!==o){for(n=0;r>n;n++)if(a[n]===t){i=n;break}-1!==i&&(i>o||(a.splice(o,1),a.splice(i,0,e)))}}}}(),v=function(){function e(e){return"string"==typeof e?!1:"function"==typeof e.ready||"function"==typeof e.process}function t(t){var n=c(t),r=cfg.loader[n];if(e(r))return r;var a,i=r;if("object"==typeof i)for(var o in i){a=o,i=i[o];break}return cfg.loader[n]=new b("js",p.resolve(a,i),a)}function n(e,t){return function(n){e(t,n)}}function r(e,t,r){d(e,function(e,a){var i=n(r,e),o=t.process(a,e,i);void 0!==o&&r(e,o)})}var a={process:function(e){try{return JSON.parse(e)}catch(t){return console.error(t,e),null}}};return cfg.loader={json:a},{load:function(e,n){var a=t(e.url);return a.process?(r(e,a,n),void 0):(a.done(function(){r(e,a.exports,n)}),void 0)},exists:function(e){if(!e.url)return!1;var t=c(e.url);return cfg.loader.hasOwnProperty(t)},register:function(e,t){if("string"==typeof t){var n=include;null==n.location&&(n={location:i(o())}),t=l(t,n)}cfg.loader[e]=t}}}(),y={create:function(t,n){for(var r=t.split("."),a=e,i=r[r.length-1];r.length>1;){var o=r.shift();a=a[o]||(a[o]={})}r=null,Object.defineProperty(a,i,{get:function(){delete a[i];try{var r=__eval(n,e.include);null==r||r instanceof b||(a[i]=r)}catch(o){o.xpath=t,f.reportError(o)}finally{return n=null,t=null,a[i]}}})}},b=function(e,t,s,u){function c(e){var t=e.type,r=e.parent,a=e.url;if(null==n&&"css"===t)return e.state=4,e;if(u.exists(e)===!1)switch(t){case"js":case"embed":s.load(e,r,"embed"===t);break;case"ajax":case"load":case"lazy":d(e,f);break;case"css":e.state=4;var i=n.createElement("link");i.href=a,i.rel="stylesheet",i.type="text/css",n.getElementsByTagName("head")[0].appendChild(i)}else u.load(e,f);return e}function f(e,t){switch(t||console.warn("Resource cannt be loaded",e.url),e.type){case"js":case"embed":return e.source=t,s.load(e,e.parent,"embed"===e.type),void 0;case"load":case"ajax":e.exports=t;break;case"lazy":y.create(e.xpath,t);break;case"css":var r=n.createElement("style");r.type="text/css",r.innerHTML=t,n.getElementsByTagName("head")[0].appendChild(r)}e.readystatechanged(4)}function h(e,t,n){if(null==e)return null;null==n&&(n=[]);for(var r,a=0,i=e.length;i>a;a++)r=e[a].resource,t===r.type&&n.push(r),null!=r.includes&&h(r.includes,t,n);return n}var p=function(t,n,a,u,f,d){e.call(this),this.childLoaded=r(this.childLoaded,this);var h=n&&n.path;null!=h&&(this.url=h=l(h,f)),this.route=n,this.namespace=a,this.type=t,this.xpath=u,this.parent=f,null==d&&h&&(d=("/"===h[0]?"":"/")+h);var p=bin[t]&&bin[t][d];return p?(4>p.state&&"js"===t&&s.moveToParent(p,f),p):null==h?(this.state=3,this.location=i(o()),this):(this.state=0,this.location=i(h),(bin[t]||(bin[t]={}))[d]=this,cfg.version&&(this.url+=(-1===this.url.indexOf("?")?"?":"&")+"v="+cfg.version),c(this))};return p.prototype=a(p,e,{childLoaded:function(){var e=this,t=e.includes;if(t&&t.length){if(3>e.state)return;for(var n=0;t.length>n;n++)if(4!==t[n].resource.state)return}e.readystatechanged(4)},create:function(e,t,n,r,a){var i;return this.state=this.state>=3?3:2,this.response=null,null==this.includes&&(this.includes=[]),i=new p(e,t,n,r,this,a),this.includes.push({resource:i,route:t}),i},include:function(e,n){var r=this;return t.each(e,n,function(t,n,a){(null==r.route||r.route.path!==n.path)&&r.create(e,n,t,a).on(4,r.childLoaded)}),this},getNestedOfType:function(e){return h(this.includes,e)}}),p}(Include,p,g,v);t.include=new Include,t.includeLib={Routes:h,Resource:b,ScriptStack:g,registerLoader:v.register}});